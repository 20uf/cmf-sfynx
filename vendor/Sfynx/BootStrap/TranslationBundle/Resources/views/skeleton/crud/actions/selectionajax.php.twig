

    /**
     * Enabled {{ entity }} entities.
     *
     * @Route("/admin/gedmo/{{ entity|lower|replace({"\\": ''}) }}/select", name="admin_gedmo_{{ entity|lower|replace({"\\": '_'}) }}_selectentity_ajax")
     * @Secure(roles="ROLE_USER")
     * @return \Symfony\Component\HttpFoundation\Response
     *
     * @access  public
     * @author Etienne de Longeaux <etienne.delongeaux@gmail.com>
     */
    public function selectajaxAction()
    {
	  	$request = $this->container->get('request');
	   	$em		 = $this->getDoctrine()->getManager();
	   	$locale  = $this->container->get('request')->getLocale();
    	if ($request->isXmlHttpRequest()) {
	    	$pagination = $this->container->get('request')->get('pagination', null);
	    	$keyword    = $this->container->get('request')->get('keyword', '');
	    	$MaxResults = $this->container->get('request')->get('max', 10);
	    	// we set query    
	    	$query  = $em->getRepository("{{ bundle }}:{{ entity }}")->getAllByCategory('', null, '', '', false);
	    	$query
	    	->leftJoin('a.translations', 'trans');
	   		//
	  		$keyword = array(
				0 => array(
					'field_name' => 'title',
	   				'field_value' => $keyword,
					'field_trans' => true,
					'field_trans_name' => 'trans',
				),
	   		);
	    		
	   		return $this->selectajaxQuery($pagination, $MaxResults, $keyword, $query, $locale, true, array(
	              'time'      => 3600,  
	              'namespace' => 'hash_{{ route_name_prefix }}'
	        )); 
        } else {
    		throw ControllerException::callAjaxOnlySupported('selectajax');
    	}   	
    }  