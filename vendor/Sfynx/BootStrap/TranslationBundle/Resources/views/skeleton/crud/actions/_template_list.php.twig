

    /**
     * Template : Finds and displays a list of {{ entity }} entity.
     * 
     * @Cache(maxage="86400")
     * @return \Symfony\Component\HttpFoundation\Response
     *
     * @access    public
     * @author Etienne de Longeaux <etienne.delongeaux@gmail.com> 
     */
    public function _template_listAction($category = '', $MaxResults = null, $template = '_tmp_list.html.twig', $order = 'DESC', $lang = "")
    {
        $em         = $this->getDoctrine()->getManager();
        if (empty($lang)) {
            $lang   = $this->container->get('request')->getLocale();
        }
        // we create query
        $query      = $em->getRepository("{{ bundle }}:{{ entity }}")->getAllByCategory($category, $MaxResults, $order);
        // we return query in cache
        $query      = $em->getRepository("{{ bundle }}:{{ entity }}")->cacheQuery($query->getQuery(), 3600, \Doctrine\ORM\Cache::MODE_NORMAL, true);
        // we load all translations with all translatable fields from the given entity
        $entities   = $em->getRepository("{{ bundle }}:{{ entity }}")->findTranslationsByQuery($lang, $query, 'object', false);                   

        return $this->render("{{ bundle }}:{{ entity }}:$template", array(
            'entities' => $entities,
            'category' => $category,
            'locale'   => $lang,
        ));
    } 